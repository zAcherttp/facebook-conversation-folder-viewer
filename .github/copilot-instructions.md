## AI Coding Agent Guide — message-viewer

This repo is a Bun + Turborepo monorepo with a single frontend app at `apps/web` built on TanStack Start (React + TanStack Router + Vite) with Tailwind 4 and shadcn/ui. Biome handles linting/formatting.

### Architecture & Key Files
- Web app: `apps/web` (Vite). Entry router in `src/router.tsx` using a generated `routeTree.gen.ts` (do not edit generated file).
- File‑based routes: `apps/web/src/routes/**`
  - Root layout: `__root.tsx` defines `<HeadContent/>`, `<Outlet/>`, a global `<Header/>`, `<Toaster/>`, and `<TanStackRouterDevtools/>`.
  - Example route: `index.tsx` via `createFileRoute('/')`.
- UI components: `apps/web/src/components/ui/*` (shadcn/ui). Shared UI like `Header` and `Loader` in `apps/web/src/components`.
- Styling: `apps/web/src/index.css` with Tailwind 4 (`@tailwindcss/vite` plugin).
- Utilities: `apps/web/src/lib/utils.ts` exposes `cn(...)` for Tailwind class merging.
- Config: `turbo.json` (tasks), `biome.json` (lint/format rules), `bunfig.toml`, and per‑package `package.json`.

### Dev & Build Workflows
- Install deps (root):
  - `bun install`
- Run all apps in dev (port 3001 for web):
  - `bun run dev`
- Run only web app:
  - `bun run dev:web`
- Build all apps:
  - `bun run build`
- Preview web build (from `apps/web`):
  - `bun run serve`
- Lint/format with Biome (applies fixes):
  - `bun run check`

### Routing & Data Patterns
- Use TanStack Start file routes. Create a new route by adding a file in `apps/web/src/routes` and exporting `Route` via `createFileRoute`.
  ```tsx
  // apps/web/src/routes/messages.tsx
  import { createFileRoute } from "@tanstack/react-router";

  export const Route = createFileRoute("/messages")({
    component: () => <div>Messages</div>,
  });
  ```
- Prefer colocated route code (component, optional `loader`) within the file. The router tree is auto‑generated into `routeTree.gen.ts` — avoid manual edits.
- Global layout/content comes from `__root.tsx`. Use `<Header/>` for navigation and `<Toaster/>` for notifications.

### Styling & UI Conventions
- Tailwind 4 is enabled via Vite plugin. Import `cn` from `@/lib/utils` to merge class names consistently.
- Biome enforces sorted classes via `useSortedClasses` for `clsx`, `cva`, and `cn` — keep Tailwind classes stable and deterministic.
- Reuse shadcn/ui components under `@/components/ui` (e.g., `button`, `card`, `input`).

### TypeScript & Module Resolution
- Path alias: `@/*` → `apps/web/src/*` (see `apps/web/tsconfig.json`). Use absolute imports like `@/components/header`.
- Base TS options are shared in `packages/config/tsconfig.base.json` for future packages.

### External Integration
- No backend/API is configured. If adding data access, prefer TanStack route `loader`s or client‑side fetches. Keep Vite plugin constraints in mind when reading local files — use the `public/` directory or an API layer rather than direct filesystem access.

### Gotchas & Tips
- Don’t edit `apps/web/src/routeTree.gen.ts`; it’s generated by the TanStack Start plugin.
- The web dev server listens on `:3001` (`apps/web/package.json`).
- Turborepo tasks are defined at the root; use `-F web` to scope (`bun run dev:web`).

### Quick Tasks Examples
- Add a page: create a file in `apps/web/src/routes`, export `Route` with `createFileRoute`.
- Add a UI element: prefer `@/components/ui/*` or add to `@/components`.
- Add styles: Tailwind classes in components; globals in `src/index.css`.

If any workflows are missing (tests, deployment, data layer), tell me what exists and I’ll extend these instructions accordingly.
